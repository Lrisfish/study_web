<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>发布邮件整合工具</title>
</head>
<body>
    <h1>发布邮件整合工具</h1>
    <form action="/sendEmail/emailIndex/queryHistory" method="get">
        <div>
            请选择发件组：
            <select name="group">
                <option value="1">网易宝前台系统</option>
                <option value="2">综合组</option>
                <option value="3">网关组</option>
                <option value="4">风控组</option>
                <option value="5">测试组</option>
            </select>
            请选择邮件模板：
            <select name="template">
                <option value="1">预发发布邮件</option>
                <option value="2">线上发布邮件</option>
            </select>
            选择需要查看的历史发布邮件：
            <select name="history">
                <option value="1">最近一次</option>
                <option value="2">最近第二次</option>
                <option value="3">最近第三次</option>
            </select>
        </div>
        <input type="submit" value="查看" id="queryHistory">
        <a href="/user/userRegister" target="_blank">查看</a>
    </form>
</body>
</html>

<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript">
    $(function(){
        $("#queryHistory").click(function(){
            var url = "/sendEmail/emailIndex/queryHistory";
            var params = {"group":$("select[name='group']").val(), "template":$("select[name='template']").val(), "history":$("select[name='history']").val()};

            $.ajax({
                "url" : url,
                "data" : params,
                "type" : "get",
                "success" : function(data) {
                    // 参数为json类型的对象
                    alert(data.message)
                },
                "error" : function() {
                    alert("用户名或者密码错误");
                }
            });

        });
    });
</script>
